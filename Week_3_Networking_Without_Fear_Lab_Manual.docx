# Week 3 - Networking Without Fear Lab Manual

## Course Overview
**Week 3: Networking Without Fear**
**Duration:** Week 3
**Deliverable:** Network Map + Scan Report

## Learning Objectives
By the end of this week, students will be able to:
- Understand TCP/IP fundamentals and network protocols
- Perform network scanning and reconnaissance
- Analyze DNS queries and responses
- Map network topology and identify active hosts
- Implement network security scanning techniques
- Capture and analyze network traffic

## Topics Covered

### 1. TCP/IP Fundamentals
- OSI Model and TCP/IP Stack
- IP addressing and subnetting (IPv4/IPv6)
- Common protocols: HTTP/HTTPS, FTP, SSH, Telnet, SMTP, POP3, IMAP
- Port numbers and services
- Routing and switching basics

### 2. DNS (Domain Name System)
- DNS hierarchy and resolution process
- DNS record types (A, AAAA, MX, NS, CNAME, TXT)
- DNS enumeration techniques
- DNS security considerations

### 3. Network Scanning Basics
- Active vs. passive reconnaissance
- Port scanning techniques and methodologies
- Service enumeration and banner grabbing
- Network mapping and discovery
- Stealth scanning techniques

### 4. Traffic Analysis
- Packet capture fundamentals
- Protocol analysis
- Network forensics basics
- Identifying malicious traffic patterns

## Tools Required
- **Primary Tools:** Nmap, Wireshark, Ncat (Netcat)
- **DNS Tools:** dig, nslookup, host, DNSRecon
- **Network Tools:** ping, traceroute, netstat, arp
- **Platforms:** Kali Linux, Windows command line
- **Online Tools:** Shodan, VirusTotal, MX Toolbox

## Lab Environment Setup
- Kali Linux virtual machine
- Vulnerable target VMs (Metasploitable, DVWA)
- Network simulator or packet tracer
- Isolated lab network environment

## Lab Activities

### Lab 3.1: TCP/IP and Protocol Analysis (45 minutes)
**Objective:** Understand network protocols and communication patterns.

**Instructions:**
1. **Protocol Identification Exercise:**
   ```bash
   # Identify running services
   netstat -tulnp
   ss -tulnp
   
   # Check port associations
   cat /etc/services | head -50
   ```

2. **Packet Analysis:**
   - Start Wireshark capture
   - Generate HTTP, HTTPS, FTP, SSH traffic
   - Analyze packet headers and data
   - Identify protocol differences

3. **Subnetting Practice:**
   - Calculate subnet ranges for given CIDR notations
   - Plan IP addressing scheme for small network
   - Use online subnet calculators for verification

**Deliverable:** Protocol analysis worksheet with packet captures

### Lab 3.2: DNS Enumeration and Investigation (60 minutes)
**Objective:** Master DNS lookup techniques and understand DNS security.

**Instructions:**
1. **Basic DNS Queries:**
   ```bash
   # Different types of DNS queries
   dig google.com
   dig google.com MX
   dig google.com NS
   dig google.com TXT
   nslookup -type=ANY google.com
   host -a google.com
   ```

2. **DNS Enumeration:**
   ```bash
   # Subdomain enumeration
   dnsrecon -d example.com -t std
   dnsrecon -d example.com -t brt -D /usr/share/wordlists/dnsmap.txt
   ```

3. **Reverse DNS Lookups:**
   ```bash
   # Reverse IP lookups
   dig -x 8.8.8.8
   host 8.8.8.8
   ```

**Deliverable:** DNS enumeration report for 3 different domains

### Lab 3.3: Network Scanning with Nmap (90 minutes)
**Objective:** Perform comprehensive network discovery and port scanning.

**Instructions:**

1. **Host Discovery:**
   ```bash
   # Ping sweep
   nmap -sn 192.168.1.0/24
   
   # ARP scan (local network)
   nmap -PR 192.168.1.0/24
   
   # No ping scan
   nmap -Pn target_ip
   ```

2. **Port Scanning Techniques:**
   ```bash
   # TCP SYN scan (default)
   nmap -sS target_ip
   
   # TCP connect scan
   nmap -sT target_ip
   
   # UDP scan
   nmap -sU target_ip
   
   # Comprehensive scan
   nmap -sS -sU -O -sV -sC target_ip
   ```

3. **Service Detection:**
   ```bash
   # Version detection
   nmap -sV target_ip
   
   # OS detection
   nmap -O target_ip
   
   # Script scanning
   nmap -sC target_ip
   ```

4. **Stealth Scanning:**
   ```bash
   # Timing templates
   nmap -T1 target_ip  # Paranoid (very slow)
   nmap -T4 target_ip  # Aggressive (faster)
   
   # Fragmentation
   nmap -f target_ip
   
   # Decoy scanning
   nmap -D RND:10 target_ip
   ```

**Deliverable:** Complete Nmap scan results with analysis

### Lab 3.4: Traffic Capture and Analysis (75 minutes)
**Objective:** Capture and analyze network traffic using Wireshark.

**Instructions:**

1. **Basic Packet Capture:**
   - Start Wireshark on appropriate interface
   - Generate various types of traffic
   - Apply display filters to isolate traffic types
   - Save captures for analysis

2. **Protocol Analysis:**
   - Capture HTTP authentication (use HTTP sites)
   - Analyze FTP file transfers
   - Examine SSH encrypted connections
   - Compare encrypted vs. unencrypted protocols

3. **Filter Practice:**
   ```
   Common Wireshark Filters:
   http
   ftp
   ssh
   tcp.port == 80
   ip.addr == 192.168.1.1
   tcp.flags.syn == 1
   http.request.method == "POST"
   ```

4. **Traffic Statistics:**
   - Use Statistics menu to analyze conversations
   - Identify top talkers and protocols
   - Generate I/O graphs for traffic analysis

**Deliverable:** Packet capture files with detailed analysis report

## Lab Tasks (To be completed during lab session)

### Task 1: Network Topology Mapping
Create a detailed network map of the lab environment including:
- All active hosts and their IP addresses
- Open ports and running services
- Network devices (routers, switches)
- Network segments and VLANs

### Task 2: Service Banner Analysis
Collect and analyze service banners from discovered services:
- Identify service versions
- Research known vulnerabilities
- Assess security implications
- Document findings in structured format

### Task 3: Traffic Pattern Analysis
Analyze captured network traffic to identify:
- Normal vs. suspicious traffic patterns
- Protocol usage statistics
- Potential security issues
- Network performance bottlenecks

### Task 4: Scanning Methodology Development
Develop a systematic approach to network scanning:
- Pre-scanning reconnaissance
- Host discovery phases
- Port scanning strategy
- Service enumeration procedures
- Documentation requirements

## Home Tasks (To be completed outside of class)

### Home Task 1: Personal Network Assessment (Due: Next week)
**Objective:** Apply networking skills to analyze your home network environment.

**Requirements:**
1. Map your home network topology
2. Identify all connected devices and their purposes
3. Scan for open ports on devices (with permission)
4. Document network security configurations
5. Identify potential security improvements
6. Submit detailed network assessment report (3-4 pages)

**Important:** Only scan devices you own or have explicit permission to test.

### Home Task 2: Public Network Investigation (Due: End of week)
**Objective:** Research and analyze publicly available network information.

**Requirements:**
1. Choose 5 organizations (universities, companies, government)
2. Perform passive DNS enumeration using only public tools
3. Use Shodan to identify exposed services
4. Analyze DNS configurations and subdomains
5. Document findings without active probing
6. Include security recommendations
7. Submit comprehensive investigation report (4-5 pages)

**Ethics Note:** This must be passive reconnaissance only - no active scanning.

### Home Task 3: Network Monitoring Setup (Due: Next week)
**Objective:** Implement network monitoring capabilities.

**Requirements:**
1. Set up network monitoring on your home lab
2. Configure tools for continuous monitoring:
   - Network traffic analysis
   - Port scan detection
   - DNS monitoring
   - Service availability monitoring
3. Create alerting mechanisms for suspicious activity
4. Run monitoring for minimum 72 hours
5. Analyze collected data and create summary
6. Submit monitoring setup guide and analysis results

### Home Task 4: Protocol Deep Dive (Due: Next week)
**Objective:** Develop expertise in specific network protocols.

**Requirements:**
1. Choose one protocol from: HTTP/HTTPS, FTP, SSH, SMTP, or DNS
2. Research protocol in detail:
   - Technical specifications
   - Security vulnerabilities
   - Common attack vectors
   - Defense mechanisms
3. Create practical demonstration showing:
   - Normal protocol operation
   - Common security issues
   - Mitigation techniques
4. Develop protocol-specific scanning and analysis techniques
5. Submit technical report with practical demonstrations

### Home Task 5: Incident Simulation (Due: Ongoing)
**Objective:** Practice network-based incident response.

**Requirements:**
1. Create scenarios involving network-based attacks:
   - Port scanning attempts
   - DNS poisoning
   - Man-in-the-middle attacks
   - Network reconnaissance
2. Practice detection and response procedures
3. Document response methodologies
4. Create network forensics procedures
5. Maintain incident response log

## Assessment Criteria

### Network Map + Scan Report Grading Rubric (100 points total)
- **Network Discovery Completeness (25 points):** Thorough identification of hosts and services
- **Scanning Methodology (25 points):** Systematic and appropriate scanning techniques
- **Technical Analysis Quality (25 points):** Detailed analysis of findings
- **Security Assessment (15 points):** Identification of security implications
- **Documentation Quality (10 points):** Clear, professional reporting

## Advanced Challenges (Optional Bonus)

### Challenge 1: Custom Scanner Development
Create a custom network scanner using Python or another programming language that implements specific scanning techniques.

### Challenge 2: Traffic Analysis Automation
Develop automated scripts for analyzing packet captures and generating reports.

### Challenge 3: Network Visualization
Create dynamic network topology visualizations that update based on scanning results.

## Security and Ethics Considerations

### Legal Guidelines:
- Only scan networks you own or have explicit written permission to test
- Follow all applicable laws and regulations
- Respect terms of service for online tools and services
- Report discovered vulnerabilities responsibly

### Lab Ethics:
- Use isolated lab environments for testing
- Do not scan production networks without authorization
- Respect bandwidth limitations during scanning
- Clean up after testing activities

## Common Issues and Solutions

### Nmap Issues:
- **Permission denied:** Use sudo for certain scan types
- **Firewall blocking:** Adjust timing and technique options
- **False positives:** Verify results with multiple methods

### Wireshark Issues:
- **Interface not showing traffic:** Check promiscuous mode settings
- **Capture file too large:** Use appropriate filters and capture limits
- **Permission issues:** Add user to wireshark group (Linux)

### DNS Issues:
- **Queries timing out:** Try different DNS servers
- **Rate limiting:** Implement delays between queries
- **Blocked queries:** Use alternative methods or tools

## Additional Resources
- Nmap Network Scanning by Gordon Fyodor Lyon
- Wireshark User's Guide: https://www.wireshark.org/docs/wsug_html_chunked/
- TCP/IP Illustrated by W. Richard Stevens
- RFC documents for protocol specifications
- SANS Network Security courses and resources

## Tips for Success
1. Practice scanning techniques extensively in controlled environments
2. Understand the "why" behind each tool and technique
3. Always verify results using multiple methods
4. Keep detailed documentation of all activities
5. Focus on understanding protocols at the packet level
6. Develop systematic methodologies for consistent results

## Emergency Procedures
- If you accidentally scan unauthorized targets, stop immediately and report
- For any legal concerns, contact instructor immediately
- For technical emergencies in lab, contact teaching assistant
- Always err on the side of caution when in doubt about permissions